# MySQL JDBC Driver的Bug（Mac OSX环境下）：
# 中国的时区简写为CST (China Standard Time)，但全球简写为CST的时区一共有4个：
#    CST Central Standard Time (USA) UT-6:00
#    CST Central Standard Time (Australia) UT+9:30
#    CST China Standard Time UT+8:00
#    CST Cuba Standard Time UT-4:00
# 安装MySQL Server时，从操作系统获取时区并以简写CST表示，show variables like '%time_zone%'如下：
#    | Variable_name    | Value  |
#    | system_time_zone | CST    |
#    | time_zone        | SYSTEM |
# MyBatis的DateTypeHandler将java.util.Date类型转换成java.sql.Timestamp交给MySQL JDBC Driver处理，
# 而MySQL JDBC Driver会使用MySQL Server的CST创建Java TimeZone对象来处理Timestamp参数，
# 此时实际得到的Java TimeZone为Central Standard Time (USA) UT-6:00，而不是China Standard Time UT+8:00，导致存入MySQL的时间不正确。
# 通过JDBC url的serverTimezone参数指定TimeZone ID全称可以避免这个问题。
spring:
   main:
      allow-bean-definition-overriding: true
   output:
      ansi:
         enabled: always
   datasource:  
      # for Mycat
      driver-class-name: com.mysql.cj.jdbc.Driver
      url: jdbc:mysql://${mysql.host}:${mysql.port}/db_order?connectTimeout=3000&socketTimeout=10000&characterEncoding=utf8&useTimezone=true&serverTimezone=Asia/Shanghai&zeroDateTimeBehavior=CONVERT_TO_NULL&useSSL=false${jdbc.interceptors}
      # for Sharding-Proxy
      #driver-class-name: com.mysql.jdbc.Driver  
      #url: jdbc:mysql://${mysql.host}:${mysql.port}/db_order?connectTimeout=3000&socketTimeout=10000&characterEncoding=utf8&useTimezone=true&serverTimezone=Asia/Shanghai&zeroDateTimeBehavior=convertToNull&useSSL=false${jdbc.interceptors}
      username: ${mysql.user}  
      password: ${mysql.password}

my:
   druid:
      defaultAutoCommit: false
      defaultTransactionIsolation: 2      
      initialSize: 5
      maxActive: 5
      maxWait: 2000
      minIdle: 5
      validationQuery: /* ping */ select 1
      testOnBorrow: false
      testOnReturn: false
      testWhileIdle: true
      timeBetweenEvictionRunsMillis: 60000
      minEvictableIdleTimeMillis: 300000
      removeAbandoned: true
      removeAbandonedTimeout: 1800
      logAbandoned: true

# Spring Boot应用中mybatis的配置方法（备注：改为手工创建SessionFactory）
mybatis: # see MybatisProperties.class in mybatis-spring-boot-autoconfigure
   mapperLocations: classpath:mappers/*.xml

dubbo:
    application: # see com.alibaba.dubbo.config.ApplicationConfig
        id: ${application.name}-srv
        name: ${application.name}-srv
        qosEnable: false
    protocol: # see com.alibaba.dubbo.config.ProtocolConfig
        id: dubbo
        name: dubbo
        port: 20883
        threads: 3
        iothreads: 1
        server: netty
        client: netty
        status: server
        serialization: fst
        queues: 0
        keepAlive: true
    registry: # see com.alibaba.dubbo.config.RegistryConfig
        address: ${dubbo.registry}
    provider:
        filter: ${dubbo.filter}
    consumer:
        filter: ${dubbo.filter}

seata:
  enabled: true
  application-id: ${application.name}
  tx-service-group: my_demo_gtx
  config:
    type: nacos
    nacos:
      namespace:
      serverAddr: 192.168.31.108:8848
  registry:
    type: nacos
    nacos:
      cluster: default
      server-addr: 192.168.31.108:8848
      namespace: